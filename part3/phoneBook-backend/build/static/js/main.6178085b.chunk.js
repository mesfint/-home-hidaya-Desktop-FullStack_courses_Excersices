(this["webpackJsonpphonebook-part2"]=this["webpackJsonpphonebook-part2"]||[]).push([[0],{27:function(e,n,t){},49:function(e,n,t){"use strict";t.r(n);var c=t(1),a=t.n(c),r=t(21),o=t.n(r),i=(t(27),t(10)),u=t(4),s=t(0),d=function(e){var n=e.persons,t=e.handleDeletePersons;return Object(s.jsx)(s.Fragment,{children:Object(s.jsx)("ol",{children:n.map((function(e){return Object(s.jsxs)("li",{children:[" ","".concat(e.name," ").concat(e.number),Object(s.jsx)("button",{onClick:function(){return t(e.id)},children:"delete"})]},e.id)}))})})},h=function(e){e.persons;var n=e.searchTerm,t=e.handleSearchChange;return Object(s.jsxs)("div",{children:["Search people:",Object(s.jsx)("input",{placeholder:"search contact...",value:n,onChange:t})]})},l=t(3),b=t.n(l),j="https://phonebook-backend-part33.herokuapp.com/api/persons",f=function(){return b.a.get(j).then((function(e){return e.data}))},m=function(e){return b.a.post(j,e).then((function(e){return e.data}))},O=function(e,n){return b.a.put("".concat(j,"/").concat(e,"/"),n).then((function(e){return e.data}))},p=function(e){return b.a.delete("".concat(j,"/").concat(e,"/")).then((function(e){return e.data}))},v=t(22),x=function(e){var n=e.addContact,t=e.newName,c=e.newPhone,a=e.handleChange,r=e.handlePhoneChange,o=e.handleSUbmit;return Object(s.jsx)(s.Fragment,{children:Object(s.jsxs)("form",{onSubmit:o,children:[Object(s.jsx)("br",{}),Object(s.jsxs)("div",{children:["name: ",Object(s.jsx)("input",{value:t,onChange:a}),"number: ",Object(s.jsx)("input",{value:c,onChange:r})]}),Object(s.jsx)("div",{children:Object(s.jsx)("button",{onClick:function(){n()},type:"submit",children:"add"})})]})})},g=function(e){var n=e.notification;return null===n?null:Object(s.jsx)(s.Fragment,{children:Object(s.jsx)("div",{className:n.type,children:n.message})})},w=function(){var e=Object(c.useState)([]),n=Object(u.a)(e,2),t=n[0],a=n[1],r=Object(c.useState)(""),o=Object(u.a)(r,2),l=o[0],b=o[1],j=Object(c.useState)(""),w=Object(u.a)(j,2),C=w[0],S=w[1],k=Object(c.useState)(""),y=Object(u.a)(k,2),P=y[0],D=y[1],L=Object(c.useState)(null),N=Object(u.a)(L,2),T=N[0],F=N[1];Object(c.useEffect)((function(){f().then((function(e){a(e)}))}),[]);var I=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success";F({message:e,type:n}),setTimeout((function(){F(null)}),5e3)},A=0===P.length?t:t.filter((function(e){return e.name.toLowerCase().indexOf(P.toLowerCase())>0}));return Object(s.jsxs)("div",{children:[Object(s.jsx)("h2",{children:"Phonebook"}),Object(s.jsx)(g,{notification:T}),Object(s.jsx)(h,{handleSearchChange:function(e){D(e.target.value)},persons:t,searchTerm:P}),Object(s.jsx)("h2",{children:"Add name and Numbers"}),Object(s.jsx)(x,{addContact:function(){var e=t.find((function(e){return e.name===l}));if(e){window.confirm("".concat(e.name," already in phonebook, replace the old number with new one?"))&&O(e.id,{name:e.name,number:C}).then((function(n){a(t.map((function(t){return t.id!==e.id?t:n})))})).catch((function(n){I("Person   ".concat(e.name," was already removed from server")),setTimeout((function(){F(null)}),5e3),a(t.filter((function(n){return n.id!==e.id})))}))}else{var n={contactId:Object(v.v4)(),name:l,number:C};m(n).then((function(e){a([].concat(Object(i.a)(t),[{id:n.contactId,name:n.name,number:n.number}])),I("Added ".concat(l),"success"),b(""),S("")})),t.find((function(e){return e.name.toLowerCase()===l.toLowerCase()||e.number===C}))&&(a(Object(i.a)(t)),I(" ".concat(l," is already in contact")),b("")),b("")}},newName:l,newPhone:C,handleChange:function(e){b(e.target.value)},handlePhoneChange:function(e){S(e.target.value)},handleSUbmit:function(e){e.preventDefault()}}),Object(s.jsx)(d,{handleDeletePersons:function(e){var n=t.find((function(n){return n.id===e}));window.confirm("Delete ".concat(n.name))&&p(e).then((function(c){a(t.filter((function(n){return n.id!==e}))),I("Deleted ".concat(n.name))})).catch((function(){a(t.filter((function(n){return n.id!==e}))),I("".concat(n.name," had already been removed"),"error")}))},persons:A})]})};o.a.render(Object(s.jsx)(a.a.StrictMode,{children:Object(s.jsx)(w,{})}),document.getElementById("root"))}},[[49,1,2]]]);
//# sourceMappingURL=main.6178085b.chunk.js.map